### **Название задачи:**
Передача ставок в кол-центр

### **Автор:**
Диас

### **Дата:**
28.02.2025

---

### **Функциональные требования**

| **№** | **Действующие лица или системы** | **Use Case** | **Описание** |
| :-: | :- | :- | :- |
| 1 | Клиент | Запрос ставки по телефону | Клиент звонит в кол-центр, чтобы уточнить актуальные ставки по депозитам. |
| 2 | Оператор кол-центра | Предоставление информации о ставках | Оператор предоставляет клиенту актуальную ставку, запрашивая её из внутренней системы. |
| 3 | Система банка | Обновление ставок | Банк обновляет ставки по депозитам в своей системе. |
| 4 | Партнерский кол-центр | Получение ставок в виде файла | Партнерский кол-центр загружает актуальные ставки через SFTP. |
| 5 | Автоматический процесс | Передача ставок во внешнюю систему | Банк генерирует файл со ставками и отправляет его партнёру по SFTP. |

---

### **Нефункциональные требования**

| **№** | **Требование** |
| :-: | :- |
| 1 | Актуальные ставки должны обновляться в системах банка не реже одного раза в сутки. |
| 2 | Передача данных в партнерский кол-центр должна быть автоматизирована. |
| 3 | Канал передачи файлов должен быть безопасным (например, SFTP с шифрованием). |
| 4 | Операторы кол-центра должны получать информацию о ставках не более чем за 2 секунды. |
| 5 | Должен быть механизм логирования и мониторинга передачи ставок. |

---

### **Решение**

1. - Будут разработаны диаграммы контекста и контейнеров, отображающие связь между банком, кол-центрами и партнерской системой.
   - Основные компоненты: АБС банка, CRM, API для внутреннего кол-центра, SFTP-сервер для передачи данных партнёрам.

2. **Выбор технологий и логика решений:**
   - Внутренний кол-центр получает ставки через API (REST/GraphQL).
   - Партнёрский кол-центр получает ставки через автоматизированную отправку файлов (CSV/XML) по SFTP.
   - Ставки обновляются в АБС и реплицируются в CRM для быстрого доступа операторами.

3. **Мониторинг и логирование:**
   - Будет настроен мониторинг успешной передачи файлов.
   - Логирование всех операций обновления ставок и их передачи внешним системам.

---

### **Альтернативы**

| **Альтернатива** | **Плюсы** | **Минусы** |
| :- | :- | :- |
| Использование API вместо SFTP для партнёров | Более оперативное обновление, меньше ошибок | Требует доработки системы партнёра, что невозможно в текущем MVP |
| Отправка ставок по e-mail партнёрам | Простота реализации | Неавтоматизированный процесс, риск ошибок |
| Хранение ставок в общем доступе (например, веб-портал) | Доступность для всех партнёров | Требует контроля безопасности и возможны ошибки из-за устаревших данных |

---

### **Недостатки, ограничения, риски**

1. **Риски:**
   - Возможные задержки в обновлении ставок.
   - Перегрузка кол-центра из-за высокого спроса на консультации.
   - Ошибки в передаче файлов могут привести к несвоевременному обновлению ставок у партнёров.

2. **Ограничения:**
   - Невозможность API-интеграции с партнёрами в рамках MVP.
   - Завязка на SFTP требует надежной инфраструктуры.

3. **Способы минимизации рисков:**
   - Внедрение мониторинга и логирования.
   - Настройка резервного канала передачи ставок (например, ручная отправка в случае сбоя).

